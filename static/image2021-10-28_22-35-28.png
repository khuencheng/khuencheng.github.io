<html>
<head>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
</head>
<body>
<div style="text-align: center;margin-top: 100px">
    <img src="/login/static/loading.gif"/>
</div>
<script>
    let v = JSON.parse('{"lark_app_id": "cli_a1049becf838d00c", "redirect_to": "https://confluence.qingteng.cn/login.action?os_destination=%2Fdownload%2Fattachments%2F88855946%2Fimage2021-10-28_22-35-28.png%3Fversion%3D1%26modificationDate%3D1635431729000%26api%3Dv2\u0026permissionViolation=true", "wx_corp_id": null}')
    let ua = navigator.userAgent.toLowerCase();
    if (ua.indexOf('micromessenger') !== -1) {
        // wxwork
        window.sessionStorage['redirect_to'] = v['redirect_to']
        window.location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + v['wx_corp_id'] + '&redirect_uri=' +
            window.location.protocol + '//' + window.location.host
            + '/login/idp/login-callback/wxwork/oauth&response_type=code&scope=snsapi_base&state=web_login#wechat_redirect')
    } else if (ua.indexOf('lark/') !== -1) {
        // feishu
        window.sessionStorage['redirect_to'] = v['redirect_to']
        window.location.replace('https://open.feishu.cn/open-apis/authen/v1/index?app_id=' + v['lark_app_id'] + '&redirect_uri=' +
            window.location.protocol + '//' + window.location.host
            + '/login/idp/login-callback/lark/oauth&state=web_login')
    } else {
        // to default login page
        window.location.replace('/static/login?go=' + v['redirect_to'])
    }
</script>
</body>
</html>